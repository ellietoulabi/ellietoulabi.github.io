{% include base_path %}

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="{{ base_path }}/">{{ site.title }}</a></li>
          {% assign current_url = page.url | default: '/' %}
          {% if current_url == '' %}
            {% assign current_url = '/' %}
          {% endif %}
          {% if current_url != '/' and current_url | slice: -1 != '/' %}
            {% assign current_url = current_url | append: '/' %}
          {% endif %}
          {% for link in site.data.navigation.main %}
            {% if link.url contains 'http' %}
              {% assign domain = '' %}
            {% else %}
              {% assign domain = base_path %}
            {% endif %}
            {% assign link_url = link.url %}
            {% if link_url == '' %}
              {% assign link_url = '/' %}
            {% endif %}
            {% if link_url != '/' and link_url | slice: -1 != '/' %}
              {% assign link_url = link_url | append: '/' %}
            {% endif %}
            {% assign is_current = false %}
            {% if current_url == link_url %}
              {% assign is_current = true %}
            {% endif %}
            <li class="masthead__menu-item{% if is_current %} masthead__menu-item--active{% endif %}"><a{% if is_current %} class="is-active"{% endif %} href="{{ domain }}{{ link.url }}">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>